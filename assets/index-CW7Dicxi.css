:root{--bg-color: #202028;--text-color: #f0f0f0;--accent: #ffcc00;--border: #f0f0f0;--ui-bg: #333340}*{-webkit-tap-highlight-color:transparent;-webkit-user-select:none;user-select:none}html{overflow:hidden}body{margin:0;padding:0;background-color:#101015;color:var(--text-color);font-family:Noto Sans JP,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;overflow:hidden;overflow-x:hidden;touch-action:manipulation}#game-container{position:relative;width:100vw;height:100vh;background-color:var(--bg-color);border:none;max-width:100%;max-height:100%;overflow:hidden;overflow-x:hidden}.screen{display:none;width:100%;height:100%;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}.screen.active{display:flex}#title-screen{justify-content:center;background:linear-gradient(135deg,#2b32b2,#1488cc);overflow-x:hidden}.game-title{font-family:"Press Start 2P",cursive;font-size:24px;text-align:center;color:var(--accent);text-shadow:4px 4px 0 #000;margin-bottom:40px;line-height:1.5}.menu{display:flex;flex-direction:column;gap:15px}.pixel-btn{font-family:"Press Start 2P",monospace;font-size:14px;padding:15px 30px;background-color:#fff;color:#000;border:4px solid #000;cursor:pointer;box-shadow:4px 4px #555;transition:transform .1s;touch-action:manipulation}.pixel-btn:active{transform:translate(2px,2px);box-shadow:2px 2px #555}.pixel-btn.sm{padding:10px 20px;font-size:12px}.pixel-btn.action-btn{background-color:var(--accent)}.pixel-btn.back-btn{margin-top:auto;margin-bottom:20px;background-color:#f66;color:#fff}.screen-title{margin:10px 0;font-family:"Press Start 2P",monospace;font-size:18px;text-align:center}#starter-selection{overflow-x:hidden}.starter-container{display:flex;margin-top:20px}.starter-card{background:var(--ui-bg);border:2px solid var(--border);padding:20px;border-radius:8px;cursor:pointer;width:120px;text-align:center;transition:transform .2s}.starter-card:hover{transform:translateY(-5px);border-color:var(--accent)}.sprite-placeholder{font-size:40px;margin-bottom:10px}.type-badges span{display:inline-block;padding:2px 6px;font-size:10px;border-radius:4px;margin:2px;color:#fff}.badge.grass{background:#78c850}.badge.poison{background:#a040a0}.badge.fire{background:#f08030}.badge.water{background:#6890f0}#party-select-screen{overflow-x:hidden}.party-layout{display:flex;width:100%;height:auto;max-height:100vh;padding:10px;gap:10px;flex-direction:column;overflow-y:auto;box-sizing:border-box}.box-section,.party-section{flex:1;background:#0000004d;border:2px solid #555;padding:10px;border-radius:8px;display:flex;flex-direction:column}.box-grid{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(4,1fr);gap:5px;flex-grow:1;margin-top:10px}.box-slot{background:#444;border:2px solid #222;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;position:relative;padding:5px}.box-slot canvas{image-rendering:pixelated;width:100%;height:auto;object-fit:contain;aspect-ratio:1 / 1}.box-slot:hover{border-color:#fff}.box-slot.selected{border-color:var(--accent)}.box-slot img{max-width:100%;max-height:100%}.party-list{display:flex;flex-direction:column;gap:5px;flex-grow:1;margin-top:10px;overflow-y:auto}.party-slot{background:#444;padding:5px 10px;display:flex;align-items:center;justify-content:flex-start;border:1px solid #222;cursor:pointer}.party-slot canvas{image-rendering:pixelated}.party-slot.selected{border-color:var(--accent)}#dungeon-screen{position:relative;overflow-x:hidden}.status-bar{width:100%;height:80px;background:#333;display:flex;justify-content:space-between;align-items:center;padding:0 6px;box-sizing:border-box;border-bottom:2px solid #555}.player-status{display:flex;align-items:center}.mini-sprite{width:64px;height:64px;image-rendering:pixelated;transform-origin:center}.hp-bar-sm{width:100px;height:8px;background:#555;margin-top:4px;border-radius:4px;overflow:hidden}.hp-bar-sm .fill{height:100%;background:#4caf50;width:100%;transition:width .3s}canvas#dungeon-canvas{image-rendering:pixelated;background:#111}.message-log{position:absolute;bottom:0;width:100%;height:80px;background:#000c;color:#fff;padding:10px;box-sizing:border-box;font-size:14px;overflow-y:auto;pointer-events:none}#battle-screen{overflow-x:hidden}.battle-scene{height:50%;width:100%;position:relative;background:linear-gradient(to bottom,#80d0d0 0% 50%,#50a040 50% 100%);overflow-x:hidden}.enemy-area{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.enemy-area .sprite-area{position:absolute;left:calc(50% + 20px);top:calc(50% - 100px)}.player-area{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.player-area .sprite-area{position:absolute;bottom:10px;right:calc(50% + 20px)}.player-area .stat-box{position:absolute;bottom:40px;left:calc(50% + 30px)}.sprite-area canvas{image-rendering:pixelated}.player-area .sprite-area canvas{transform:scaleX(-1) scale(.8)}.enemy-area .sprite-area canvas{transform:scale(.8);transform-origin:center bottom}.stat-box{background:#ffffffe6;color:#000;padding:8px;border-radius:4px;border:2px solid #333;font-family:"Press Start 2P",monospace;font-size:12px;min-width:120px}.enemy-area .stat-box{position:absolute;top:calc(50% - 60px);right:calc(50% + 40px);text-align:right}.hp-bar{width:100%;height:6px;background:#ccc;margin:4px 0;border-radius:3px;overflow:hidden;border:1px solid #888}.hp-bar .fill{height:100%;background:#4caf50;width:100%;transition:width .5s}.exp-bar{width:100%;height:4px;background:#ddd;margin-top:2px}.exp-bar .fill{height:100%;background:#39f;width:0%}.battle-ui{flex-grow:1;width:100%;background:#202028;border-top:4px solid #444;display:flex;flex-direction:column;overflow-x:hidden}.message-box{padding:15px;font-size:16px;height:60px;box-sizing:border-box;flex-grow:1}.ui-top-row{display:flex;border-bottom:2px solid #333}.command-box{width:120px;background:#2b2b35;display:flex;flex-direction:column;padding:5px;gap:4px;justify-content:center;border-left:2px solid #333;flex-shrink:0}.cmd-btn{font-family:Noto Sans JP;font-size:11px;padding:4px;background:#ddd;border:2px solid #555;cursor:pointer;text-align:center;border-radius:4px;color:#000}.cmd-btn:hover{background:#fff;border-color:var(--accent)}.action-menu{flex-grow:1;padding:10px;background:#2b2b35}.question-area{width:100%;text-align:center}#question-text{margin:0 0 10px;color:#fcc}.choices-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}.choice-btn{padding:10px;background:#444;border:2px solid #666;color:#fff;cursor:pointer;font-family:Noto Sans JP;text-align:left}.choice-btn:hover{background:#555}.choice-btn.correct{background:#2e7d32!important;border-color:#1b5e20!important}.choice-btn.wrong{background:#c62828!important;border-color:#b71c1c!important}.move-area{display:grid;grid-template-columns:1fr 1fr;gap:10px;height:100%}.move-btn{background:#eee;color:#000;border:3px solid #ccc;border-radius:8px;font-family:Noto Sans JP;font-weight:700;cursor:pointer}.move-btn:hover{background:#fff;border-color:var(--accent)}.overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:#0006;display:flex;align-items:flex-end;justify-content:center;padding-bottom:20px;box-sizing:border-box}.dialogue-box{background:#000000d9;border:4px solid white;border-radius:8px;width:90%;min-height:120px;padding:15px;color:#fff;font-family:Noto Sans JP,sans-serif;position:relative}.speaker-name{position:absolute;top:-15px;left:20px;background:#00f;padding:2px 10px;border:2px solid white;border-radius:4px;font-weight:700}.dialogue-next{position:absolute;bottom:10px;right:20px;animation:bounce 1s infinite}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(3px)}}.controls-pad{position:absolute;bottom:40px;right:10px;display:flex;flex-direction:column;align-items:center;gap:8px;opacity:1;touch-action:manipulation}.controls-pad:hover{opacity:1}.pad-btn{width:30px;height:30px;background:#00000080;border:1px solid white;color:#fff;border-radius:5px;cursor:pointer;touch-action:manipulation;font-size:12px}#gym-progress-screen{padding:20px 0;box-sizing:border-box;justify-content:flex-start;gap:20px;overflow-x:hidden}.gym-leaders-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:15px;padding:0 20px;width:100%;box-sizing:border-box}.gym-leader-card{background:var(--ui-bg);border:3px solid #555;border-radius:8px;padding:10px;text-align:center;transition:all .3s;position:relative}.gym-leader-card.cleared{opacity:.5;filter:grayscale(100%)}.gym-leader-card.next{border-color:var(--accent);box-shadow:0 0 20px #fc09;animation:pulse 2s infinite}@keyframes pulse{0%,to{box-shadow:0 0 20px #fc09}50%{box-shadow:0 0 30px #ffcc00e6}}.leader-sprite{width:100%;height:auto;image-rendering:pixelated;margin-bottom:8px}.leader-name{font-family:"Press Start 2P",monospace;font-size:12px;margin:5px 0;color:var(--accent)}.leader-badge{font-size:10px;color:#aaa;margin:3px 0}.leader-status{position:absolute;top:5px;right:5px;background:var(--accent);color:#000;padding:2px 6px;border-radius:3px;font-size:8px;font-weight:700}.gym-leader-card.cleared .leader-status{background:#4caf50;color:#fff}.box-section,.party-section{flex:none;min-height:auto;padding:8px}.box-grid,.party-list{gap:3px}#gym-progress-screen{padding:10px 0;gap:15px}.gym-leaders-grid{grid-template-columns:repeat(2,1fr);gap:10px;padding:0 10px}.leader-sprite{width:80px;height:80px}.leader-name{font-size:10px}.leader-badge{font-size:8px}#start-next-gym-btn{margin:0 10px}.game-title{font-size:18px;margin-bottom:20px}.pixel-btn{font-size:12px;padding:12px 20px}.starter-container{flex-direction:column;gap:15px}.starter-card{width:200px;padding:5px;display:flex;align-items:center;justify-content:center}.starter-sprite-canvas{width:80px;height:80px}#gym-progress-screen{padding:10px 0 20px}.screen-title{font-size:14px;margin:10px 0}#start-next-gym-btn,.back-btn{width:calc(100% - 20px);margin-left:10px;margin-right:10px}

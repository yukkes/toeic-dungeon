<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ëêå„Åà„Å£Â®ò„ÇÇ„Çì„Åô„Åü„ÅÅ TOEIC „ÉÄ„É≥„Ç∏„Éß„É≥</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Noto+Sans+JP:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="game-container">
        <!-- Title Screen -->
        <div id="title-screen" class="screen active">
            <h1 class="game-title">Ëêå„Åà„Å£Â®ò„ÇÇ„Çì„Åô„Åü„ÅÅ<br>TOEIC „ÉÄ„É≥„Ç∏„Éß„É≥</h1>
            <div class="menu">
                <button class="menu-btn pixel-btn" id="new-game-btn">„ÅØ„Åò„ÇÅ„Åã„Çâ</button>
                <button class="menu-btn pixel-btn" id="continue-btn">„Å§„Å•„Åç„Åã„Çâ</button>
            </div>
        </div>

        <!-- Starter Selection Screen -->
        <div id="starter-screen" class="screen">
            <h2 class="screen-title">Âæ°‰∏âÂÆ∂„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ</h2>
            <div class="starter-container">
                <div class="starter-card" data-id="1">
                    <canvas class="starter-sprite" width="128" height="128"></canvas>
                    <div class="starter-info">
                        <h3>„Éï„Ç∑„ÇÆ„ÉÄ„Éç</h3>
                        <div class="type-badges">
                            <span class="type-badge grass">„Åè„Åï</span>
                            <span class="type-badge poison">„Å©„Åè</span>
                        </div>
                    </div>
                </div>
                <div class="starter-card" data-id="4">
                    <canvas class="starter-sprite" width="128" height="128"></canvas>
                    <div class="starter-info">
                        <h3>„Éí„Éà„Ç´„Ç≤</h3>
                        <div class="type-badges">
                            <span class="type-badge fire">„Åª„ÅÆ„Åä</span>
                        </div>
                    </div>
                </div>
                <div class="starter-card" data-id="7">
                    <canvas class="starter-sprite" width="128" height="128"></canvas>
                    <div class="starter-info">
                        <h3>„Çº„Éã„Ç¨„É°</h3>
                        <div class="type-badges">
                            <span class="type-badge water">„Åø„Åö</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dungeon Screen -->
        <div id="dungeon-screen" class="screen" style="position: relative;">
            <div class="message-log" id="dungeon-message-log" style="display: none;"></div>
            <div class="status-bar">
                <div class="player-info" style="display: flex; align-items: center; gap: 15px;">
                    <canvas id="dungeon-player-sprite" width="96" height="96"
                        style="width: 96px; height: 96px; filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.5));"></canvas>
                    <div>
                        <span id="player-name"
                            style="font-size: 1.2rem; font-weight: bold; display: block; margin-bottom: 5px;">„Éï„Ç∑„ÇÆ„ÉÄ„Éç</span>
                        <span class="level" style="font-size: 1rem;">Lv.<span id="player-level">5</span></span>
                    </div>
                </div>
                <div id="dungeon-ui">
                    <div style="font-size: 0.9rem; margin-top: 5px;">
                        <span>HP: <span id="dungeon-player-hp"></span>/<span id="dungeon-player-max-hp"></span></span>
                        <span style="margin-left:10px;">Floor: <span id="floor-display">1</span></span>
                        <span style="margin-left:10px;">Badges: <span id="badge-count">0</span></span>
                    </div>
                    <div style="margin-top: 5px; display: flex; align-items: center;">
                        <button id="dungeon-party-btn" class="pixel-btn"
                            style="margin-right: 10px; background: #eef;">üë• <span id="party-count">1</span>/6</button>
                        <button id="dungeon-potion-btn" class="pixel-btn" style="margin-left: 5px;">üíä <span
                                id="dungeon-potion-count">0</span>/3</button>
                        <button class="pixel-btn" style="margin-left: 5px; cursor: default; background: #ddd;">üî¥ <span
                                id="dungeon-ball-count">5</span>/6</button>
                    </div>
                </div>
            </div>
            <canvas id="dungeon-canvas" width="640" height="480"></canvas>
            <div class="controls">
                <button class="control-btn pixel-btn" id="move-up">‚Üë</button>
                <div class="control-row">
                    <button class="control-btn pixel-btn" id="move-left">‚Üê</button>
                    <button class="control-btn pixel-btn" id="move-down">‚Üì</button>
                    <button class="control-btn pixel-btn" id="move-right">‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Battle Screen -->
        <div id="battle-screen" class="screen">
            <div class="battle-container">
                <div class="message-log" id="message-log">
                    ÈáéÁîü„ÅÆ„Éù„ÉÉ„Éù„ÅåÁèæ„Çå„ÅüÔºÅ
                </div>
                <div class="enemy-section">
                    <div class="pokemon-display">
                        <canvas id="enemy-sprite" width="128" height="128"></canvas>
                        <div class="pokemon-stats">
                            <div class="pokemon-header">
                                <span id="enemy-name">„Éù„ÉÉ„Éù</span>
                                <span class="level">Lv.<span id="enemy-level">3</span></span>
                            </div>
                            <div class="hp-bar-container">
                                <div class="hp-label">HP</div>
                                <div class="hp-bar">
                                    <div class="hp-fill" id="enemy-hp-fill" style="width: 100%"></div>
                                </div>
                                <div class="hp-numbers">
                                    <span id="enemy-hp">20</span>/<span id="enemy-max-hp">20</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="player-section">
                    <div class="pokemon-display">
                        <canvas id="player-sprite" width="128" height="128"></canvas>
                        <div class="pokemon-stats">
                            <div class="pokemon-header">
                                <span id="battle-player-name">„Éï„Ç∑„ÇÆ„ÉÄ„Éç</span>
                                <span class="level">Lv.<span id="battle-player-level">5</span></span>
                            </div>
                            <div class="hp-bar-container">
                                <div class="hp-label">HP</div>
                                <div class="hp-bar">
                                    <div class="hp-fill" id="player-hp-fill" style="width: 100%"></div>
                                </div>
                                <div class="hp-numbers">
                                    <span id="player-hp">25</span>/<span id="player-max-hp">25</span>
                                </div>
                            </div>
                            <div class="exp-bar-container">
                                <div class="exp-label">EXP</div>
                                <div class="exp-bar">
                                    <div class="exp-fill" id="player-exp-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="battle-ui">

                    <div class="question-panel" id="question-panel">
                        <div class="question-text" id="question-text">
                            Question goes here...
                        </div>
                        <div class="choices" id="choices">
                            <!-- Generated by JS -->
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <button id="battle-ball-btn" class="pixel-btn"
                                style="flex: 1; background: #fee; color: #d00;">üî¥ „Å§„Åã„Åæ„Åà„Çã (<span
                                    id="battle-ball-count">5</span>)</button>
                            <button id="battle-run-btn" class="pixel-btn"
                                style="flex: 1; background: #eee; color: #555;">„Å´„Åí„Çã</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Victory Screen -->
        <div id="victory-screen" class="screen">
            <div class="result-container">
                <h2 class="result-title victory">Victory!</h2>
                <div class="result-stats">
                    <p>ÂÄí„Åó„Åü„Ç∏„É†„É™„Éº„ÉÄ„Éº: <span id="defeated-gyms">0</span>/8</p>
                    <p>Áç≤Âæó„Åó„Åü„Éê„ÉÉ„Ç∏: <span id="total-badges">0</span></p>
                    <p>Á∑è„Éê„Éà„É´Êï∞: <span id="total-battles">0</span></p>
                    <p>TOEICÊ≠£Ëß£Áéá: <span id="accuracy">0</span>%</p>
                </div>
                <button class="pixel-btn" id="return-title-btn">„Çø„Ç§„Éà„É´„Å∏Êàª„Çã</button>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameover-screen" class="screen">
            <div class="result-container">
                <h2 class="result-title defeat">Game Over</h2>
                <div class="result-stats">
                    <p>Âà∞ÈÅîÈöéÂ±§: <span id="reached-floor">1</span>F</p>
                    <p>Á∑è„Éê„Éà„É´Êï∞: <span id="go-total-battles">0</span></p>
                    <p>TOEICÊ≠£Ëß£Áéá: <span id="go-accuracy">0</span>%</p>
                </div>
                <button class="pixel-btn" id="retry-btn">„ÇÇ„ÅÜ‰∏ÄÂ∫¶ÊåëÊà¶</button>
            </div>
        </div>
    </div>

    <!-- Load Sprite Sheet -->
    <img id="sprite-sheet" src="poke.png" style="display: none;">

    <!-- Scripts -->
    <script src="sprite-loader.js"></script>
    <script src="pokemon.js"></script>
    <script src="toeic-questions.js"></script>
    <script src="dungeon.js"></script>
    <script src="battle.js"></script>
    <script src="save-manager.js"></script>
    <script src="game.js"></script>
</body>

</html>
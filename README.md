# 萌えっ娘もんすたぁ TOEIC ダンジョン

**萌えっ娘もんすたぁ TOEIC ダンジョン** は、初代ポケモン風のダンジョン探索×バトルに TOEIC 英単語・フレーズ学習を組み合わせたブラウザ向け RPG です。  
ブラウザだけで遊べて、モンスターとのバトル中に TOEIC 形式の問題に答えることで、ゲーム感覚で語彙力を鍛えられます。

- プレイスタイル: **ダンジョン探索 / ジムバトル / 育成**
- 対象: TOEIC 初〜中級学習者（基礎語彙〜頻出表現）
- 実装: **SolidJS / TypeScript / Vite**
- 配信: **GitHub Pages** で静的ホスティング

---

## プレイ / デモ

GitHub Pages で公開されています。

```text
https://yukkes.github.io/toeic-dungeon/
```

1. 上記 URL にアクセス
2. タイトル画面でモードを選択
   - 「育成モード (Training)」
   - 「ジムバトル (Gym Battle)」
3. 指示に従ってポケモンを選択し、ダンジョンまたはジムに挑戦します。

※ セーブデータはブラウザのローカルストレージに保存されます。  
　別ブラウザ / シークレットウィンドウでは共有されません。

---

## ゲーム概要

### タイトル画面

タイトル画面から、以下のモードを選択できます。

- **育成モード (Training)**
  - ダンジョンを探索しながらバトル＆TOEIC 問題に回答
  - ポケモンを育成し、レベルや技を強化していくモード
- **ジムバトル (Gym Battle)**
  - 育成したポケモンでジムリーダーに挑むボスラッシュモード
- **ダンジョン再開**
  - 途中まで進めたダンジョンを再開（セーブが存在する場合のみ表示）
- **セーブデータ削除**
  - ローカルセーブ（ブラウザのストレージ）を削除

---

## ゲームモードとサイクル

### 共通: ポケモンボックス

- 4×4 の **16 マス（最大 16 匹）** まで保存可能
- 御三家（フシギダネ / ヒトカゲ / ゼニガメ）は手持ち＋ボックス合わせて **各 1 体のみ所持可能（上書き保存）**
- 御三家はゲームオーバーでも **レベルが維持** されます

### 育成モード (Training Mode)

- **敵レベル補正**  
  `Min(FloorBaseLevel, PlayerLevel - 1)` が適用されます。  
  基本的に敵はプレイヤーより少し弱い（-1 レベル）状態になり、サクサク進めるよう調整されています。
- **9 階層目の番人 (Gatekeeper)**
  - 9F のゴールには「番人ポケモン」が立ちはだかります
  - レベルは **プレイヤーと同レベル**（ただし最低 Lv.5）
  - 番人を倒さないとクリア（帰還）できません

### ジムバトルモード (Gym Battle Mode)

- **パーティ編成**
  - 手持ちおよびボックス（最大 16 匹）から **最大 6 匹** を選んでパーティを組みます
  - 6 匹未満でも挑戦可能ですが、6 匹が推奨
- **内容**
  - 8 人のジムリーダー＋チャンピオンとの **連続ボスバトル**
  - 各バトル前後に会話パート（ストーリー）を挿入

---

## TOEIC 学習要素

- TOEIC 形式の問題データは `src/data/toeic-questions.ts` などに管理されています
- 単語・熟語・短い文の理解を問う問題を、**バトル中やイベント中に解いていく** ことで経験値や報酬が変化する設計です
- 階層ごとに目安となる TOEIC レベルが設定されており、進むほど難易度も上がります

---

## 技術構成（技術者向け）

### 全体アーキテクチャ

- **SolidJS + TypeScript + Vite** によるモダンなフロントエンド構成
- コンポーネント指向アーキテクチャによる UI 分割
- Solid Store (`createStore`) を用いたリアクティブなグローバル状態管理
- ロジックは大まかに以下の役割で分割されています

| パス | 役割概要 |
| --- | --- |
| `src/App.tsx` | アプリケーションのエントリーポイント、画面ルーティング的な制御 |
| `src/store.ts` | グローバルなゲーム状態（Mode, Player, Party etc.）の管理 |
| `src/components/` | 各画面（Title, Battle, Dungeon, PartySelect）の UI コンポーネント |
| `src/game/` | ゲームコアロジック (Dungeon, BattleLogic, SaveManager etc.) |
| `src/data/` | ポケモンデータ、アイテム、TOEIC 問題などの JSON データ |
| `src/utils/` | 汎用ユーティリティ関数 |

### GitHub Pages によるホスティング

- GitHub Actions (`.github/workflows/deploy.yml`) により、`main` ブランチへの push 時に自動ビルド & デプロイされます
- ビルド成果物は `gh-pages` ブランチに配置されます

---

## 実装詳細メモ

### 画面管理

- `src/App.tsx` 内で `gameState.mode` に応じて表示するコンポーネントを切り替えています
  - 例: `<TitleScreen />`, `<DungeonScreen />`, `<BattleScreen />` など
- 状態遷移は `src/store.ts` の `setGameState` や各コンポーネント内のアクションによってトリガーされます

### ダンジョンロジック

- `src/game/Dungeon.ts` がフロア生成・エンカウント判定などを担当
- SolidJS のリアクティブシステムにより、プレイヤー位置やマップの状態変更が即座に UI に反映されます

### バトル・ステータス計算

- `src/game/BattleLogic.ts` が担当
  - ターン進行、ダメージ計算、TOEIC 問題の出題タイミング制御
  - `signal` や `store` を通じてバトルログや HP 表示を更新

### データ層

- `src/data/pokemon.json`: ポケモンの種族値、技データ定義
- `src/data/toeic-questions.json`: TOEIC 問題データセット

### セーブデータ

- `src/game/SaveManager.ts` にて `localStorage` への永続化を実装
- JSON 形式でシリアライズして保存

---

## ローカル開発

### 必要なもの

- Node.js (v24 以上推奨)
- npm / yarn / pnpm などのパッケージマネージャ

### セットアップ & 起動

```bash
# リポジトリをクローン
git clone https://github.com/yukkes/toeic-dungeon.git
cd toeic-dungeon

# 依存パッケージのインストール
npm install

# 開発サーバの起動
npm run dev
```

ブラウザで `http://localhost:5173` (Vite のデフォルト) にアクセスして動作確認できます。

### ビルド

```bash
npm run build
```

`dist` ディレクトリに静的ファイルが出力されます。

---

## 拡張・改修アイデア（技術者向け）

### 機能面

- [ ] **パーティ編成 UI の改善**
      ドラッグ&ドロップでの入れ替えや、より詳細なステータス確認
- [ ] **TOEIC 問題の拡充**
      外部 API からの取得や、カテゴリ分けの強化
- [ ] **アニメーション強化**
      Solid Transition や CSS アニメーションを用いたリッチな演出

### コード構造・品質

- [x] **TypeScript 化** (完了)
- [x] **コンポーネント分割** (SolidJS 化完了)
- [ ] **テスト導入**
      Vitest 等を用いたユニットテスト、ロジックの検証

---

## ライセンス

このリポジトリは [MIT License](./LICENSE) のもとで公開されています。

---

## 作者

- Author: [@yukkes](https://github.com/yukkes)

不具合報告や改善提案があれば、Issue もしくは Pull Request を歓迎します。